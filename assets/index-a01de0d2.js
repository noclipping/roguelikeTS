var rt=Object.defineProperty;var ot=(r,t,e)=>t in r?rt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var b=(r,t,e)=>(ot(r,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();const O=23283064365386963e-26;class A{constructor(){this._seed=0,this._s0=0,this._s1=0,this._s2=0,this._c=0}getSeed(){return this._seed}setSeed(t){return t=t<1?1/t:t,this._seed=t,this._s0=(t>>>0)*O,t=t*69069+1>>>0,this._s1=t*O,t=t*69069+1>>>0,this._s2=t*O,this._c=1,this}getUniform(){let t=2091639*this._s0+this._c*O;return this._s0=this._s1,this._s1=this._s2,this._c=t|0,this._s2=t-this._c,this._s2}getUniformInt(t,e){let i=Math.max(t,e),s=Math.min(t,e);return Math.floor(this.getUniform()*(i-s+1))+s}getNormal(t=0,e=1){let i,s,n;do i=2*this.getUniform()-1,s=2*this.getUniform()-1,n=i*i+s*s;while(n>1||n==0);let o=i*Math.sqrt(-2*Math.log(n)/n);return t+o*e}getPercentage(){return 1+Math.floor(this.getUniform()*100)}getItem(t){return t.length?t[Math.floor(this.getUniform()*t.length)]:null}shuffle(t){let e=[],i=t.slice();for(;i.length;){let s=i.indexOf(this.getItem(i));e.push(i.splice(s,1)[0])}return e}getWeightedValue(t){let e=0;for(let o in t)e+=t[o];let i=this.getUniform()*e,s,n=0;for(s in t)if(n+=t[s],i<n)return s;return s}getState(){return[this._s0,this._s1,this._s2,this._c]}setState(t){return this._s0=t[0],this._s1=t[1],this._s2=t[2],this._c=t[3],this}clone(){return new A().setState(this.getState())}}new A().setSeed(Date.now());class N{getContainer(){return null}setOptions(t){this._options=t}}class Y extends N{constructor(){super(),this._ctx=document.createElement("canvas").getContext("2d")}schedule(t){requestAnimationFrame(t)}getContainer(){return this._ctx.canvas}setOptions(t){super.setOptions(t);const i=`${t.fontStyle?`${t.fontStyle} `:""} ${t.fontSize}px ${t.fontFamily}`;this._ctx.font=i,this._updateSize(),this._ctx.font=i,this._ctx.textAlign="center",this._ctx.textBaseline="middle"}clear(){this._ctx.fillStyle=this._options.bg,this._ctx.fillRect(0,0,this._ctx.canvas.width,this._ctx.canvas.height)}eventToPosition(t,e){let i=this._ctx.canvas,s=i.getBoundingClientRect();return t-=s.left,e-=s.top,t*=i.width/s.width,e*=i.height/s.height,t<0||e<0||t>=i.width||e>=i.height?[-1,-1]:this._normalizedEventToPosition(t,e)}}function ht(r,t){return(r%t+t)%t}class G extends Y{constructor(){super(),this._spacingX=0,this._spacingY=0,this._hexSize=0}draw(t,e){let[i,s,n,o,l]=t,h=[(i+1)*this._spacingX,s*this._spacingY+this._hexSize];if(this._options.transpose&&h.reverse(),e&&(this._ctx.fillStyle=l,this._fill(h[0],h[1])),!n)return;this._ctx.fillStyle=o;let a=[].concat(n);for(let c=0;c<a.length;c++)this._ctx.fillText(a[c],h[0],Math.ceil(h[1]))}computeSize(t,e){this._options.transpose&&(t+=e,e=t-e,t-=e);let i=Math.floor(t/this._spacingX)-1,s=Math.floor((e-2*this._hexSize)/this._spacingY+1);return[i,s]}computeFontSize(t,e){this._options.transpose&&(t+=e,e=t-e,t-=e);let i=2*t/((this._options.width+1)*Math.sqrt(3))-1,s=e/(2+1.5*(this._options.height-1)),n=Math.min(i,s),o=this._ctx.font;this._ctx.font="100px "+this._options.fontFamily;let l=Math.ceil(this._ctx.measureText("W").width);this._ctx.font=o;let h=l/100;n=Math.floor(n)+1;let a=2*n/(this._options.spacing*(1+h/Math.sqrt(3)));return Math.ceil(a)-1}_normalizedEventToPosition(t,e){let i;this._options.transpose?(t+=e,e=t-e,t-=e,i=this._ctx.canvas.width):i=this._ctx.canvas.height;let s=i/this._options.height;return e=Math.floor(e/s),ht(e,2)?(t-=this._spacingX,t=1+2*Math.floor(t/(2*this._spacingX))):t=2*Math.floor(t/(2*this._spacingX)),[t,e]}_fill(t,e){let i=this._hexSize,s=this._options.border;const n=this._ctx;n.beginPath(),this._options.transpose?(n.moveTo(t-i+s,e),n.lineTo(t-i/2+s,e+this._spacingX-s),n.lineTo(t+i/2-s,e+this._spacingX-s),n.lineTo(t+i-s,e),n.lineTo(t+i/2-s,e-this._spacingX+s),n.lineTo(t-i/2+s,e-this._spacingX+s),n.lineTo(t-i+s,e)):(n.moveTo(t,e-i+s),n.lineTo(t+this._spacingX-s,e-i/2+s),n.lineTo(t+this._spacingX-s,e+i/2-s),n.lineTo(t,e+i-s),n.lineTo(t-this._spacingX+s,e+i/2-s),n.lineTo(t-this._spacingX+s,e-i/2+s),n.lineTo(t,e-i+s)),n.fill()}_updateSize(){const t=this._options,e=Math.ceil(this._ctx.measureText("W").width);this._hexSize=Math.floor(t.spacing*(t.fontSize+e/Math.sqrt(3))/2),this._spacingX=this._hexSize*Math.sqrt(3)/2,this._spacingY=this._hexSize*1.5;let i,s;t.transpose?(i="height",s="width"):(i="width",s="height"),this._ctx.canvas[i]=Math.ceil((t.width+1)*this._spacingX),this._ctx.canvas[s]=Math.ceil((t.height-1)*this._spacingY+2*this._hexSize)}}let q=(()=>{class r extends Y{constructor(){super(),this._spacingX=0,this._spacingY=0,this._canvasCache={}}setOptions(e){super.setOptions(e),this._canvasCache={}}draw(e,i){r.cache?this._drawWithCache(e):this._drawNoCache(e,i)}_drawWithCache(e){let[i,s,n,o,l]=e,h=""+n+o+l,a;if(h in this._canvasCache)a=this._canvasCache[h];else{let c=this._options.border;a=document.createElement("canvas");let u=a.getContext("2d");if(a.width=this._spacingX,a.height=this._spacingY,u.fillStyle=l,u.fillRect(c,c,a.width-c,a.height-c),n){u.fillStyle=o,u.font=this._ctx.font,u.textAlign="center",u.textBaseline="middle";let g=[].concat(n);for(let f=0;f<g.length;f++)u.fillText(g[f],this._spacingX/2,Math.ceil(this._spacingY/2))}this._canvasCache[h]=a}this._ctx.drawImage(a,i*this._spacingX,s*this._spacingY)}_drawNoCache(e,i){let[s,n,o,l,h]=e;if(i){let c=this._options.border;this._ctx.fillStyle=h,this._ctx.fillRect(s*this._spacingX+c,n*this._spacingY+c,this._spacingX-c,this._spacingY-c)}if(!o)return;this._ctx.fillStyle=l;let a=[].concat(o);for(let c=0;c<a.length;c++)this._ctx.fillText(a[c],(s+.5)*this._spacingX,Math.ceil((n+.5)*this._spacingY))}computeSize(e,i){let s=Math.floor(e/this._spacingX),n=Math.floor(i/this._spacingY);return[s,n]}computeFontSize(e,i){let s=Math.floor(e/this._options.width),n=Math.floor(i/this._options.height),o=this._ctx.font;this._ctx.font="100px "+this._options.fontFamily;let l=Math.ceil(this._ctx.measureText("W").width);this._ctx.font=o;let a=l/100*n/s;return a>1&&(n=Math.floor(n/a)),Math.floor(n/this._options.spacing)}_normalizedEventToPosition(e,i){return[Math.floor(e/this._spacingX),Math.floor(i/this._spacingY)]}_updateSize(){const e=this._options,i=Math.ceil(this._ctx.measureText("W").width);this._spacingX=Math.ceil(e.spacing*i),this._spacingY=Math.ceil(e.spacing*e.fontSize),e.forceSquareRatio&&(this._spacingX=this._spacingY=Math.max(this._spacingX,this._spacingY)),this._ctx.canvas.width=e.width*this._spacingX,this._ctx.canvas.height=e.height*this._spacingY}}return r.cache=!1,r})();class D extends Y{constructor(){super(),this._colorCanvas=document.createElement("canvas")}draw(t,e){let[i,s,n,o,l]=t,h=this._options.tileWidth,a=this._options.tileHeight;if(e&&(this._options.tileColorize?this._ctx.clearRect(i*h,s*a,h,a):(this._ctx.fillStyle=l,this._ctx.fillRect(i*h,s*a,h,a))),!n)return;let c=[].concat(n),u=[].concat(o),g=[].concat(l);for(let f=0;f<c.length;f++){let d=this._options.tileMap[c[f]];if(!d)throw new Error(`Char "${c[f]}" not found in tileMap`);if(this._options.tileColorize){let _=this._colorCanvas,m=_.getContext("2d");m.globalCompositeOperation="source-over",m.clearRect(0,0,h,a);let y=u[f],x=g[f];m.drawImage(this._options.tileSet,d[0],d[1],h,a,0,0,h,a),y!="transparent"&&(m.fillStyle=y,m.globalCompositeOperation="source-atop",m.fillRect(0,0,h,a)),x!="transparent"&&(m.fillStyle=x,m.globalCompositeOperation="destination-over",m.fillRect(0,0,h,a)),this._ctx.drawImage(_,i*h,s*a,h,a)}else this._ctx.drawImage(this._options.tileSet,d[0],d[1],h,a,i*h,s*a,h,a)}}computeSize(t,e){let i=Math.floor(t/this._options.tileWidth),s=Math.floor(e/this._options.tileHeight);return[i,s]}computeFontSize(){throw new Error("Tile backend does not understand font size")}_normalizedEventToPosition(t,e){return[Math.floor(t/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]}_updateSize(){const t=this._options;this._ctx.canvas.width=t.width*t.tileWidth,this._ctx.canvas.height=t.height*t.tileHeight,this._colorCanvas.width=t.tileWidth,this._colorCanvas.height=t.tileHeight}}function W(r){let t,e;if(r in L)t=L[r];else{if(r.charAt(0)=="#"){let s=(r.match(/[0-9a-f]/gi)||[]).map(n=>parseInt(n,16));if(s.length==3)t=s.map(n=>n*17);else{for(let n=0;n<3;n++)s[n+1]+=16*s[n],s.splice(n,1);t=s}}else(e=r.match(/rgb\(([0-9, ]+)\)/i))?t=e[1].split(/\s*,\s*/).map(i=>parseInt(i)):t=[0,0,0];L[r]=t}return t.slice()}const L={black:[0,0,0],navy:[0,0,128],darkblue:[0,0,139],mediumblue:[0,0,205],blue:[0,0,255],darkgreen:[0,100,0],green:[0,128,0],teal:[0,128,128],darkcyan:[0,139,139],deepskyblue:[0,191,255],darkturquoise:[0,206,209],mediumspringgreen:[0,250,154],lime:[0,255,0],springgreen:[0,255,127],aqua:[0,255,255],cyan:[0,255,255],midnightblue:[25,25,112],dodgerblue:[30,144,255],forestgreen:[34,139,34],seagreen:[46,139,87],darkslategray:[47,79,79],darkslategrey:[47,79,79],limegreen:[50,205,50],mediumseagreen:[60,179,113],turquoise:[64,224,208],royalblue:[65,105,225],steelblue:[70,130,180],darkslateblue:[72,61,139],mediumturquoise:[72,209,204],indigo:[75,0,130],darkolivegreen:[85,107,47],cadetblue:[95,158,160],cornflowerblue:[100,149,237],mediumaquamarine:[102,205,170],dimgray:[105,105,105],dimgrey:[105,105,105],slateblue:[106,90,205],olivedrab:[107,142,35],slategray:[112,128,144],slategrey:[112,128,144],lightslategray:[119,136,153],lightslategrey:[119,136,153],mediumslateblue:[123,104,238],lawngreen:[124,252,0],chartreuse:[127,255,0],aquamarine:[127,255,212],maroon:[128,0,0],purple:[128,0,128],olive:[128,128,0],gray:[128,128,128],grey:[128,128,128],skyblue:[135,206,235],lightskyblue:[135,206,250],blueviolet:[138,43,226],darkred:[139,0,0],darkmagenta:[139,0,139],saddlebrown:[139,69,19],darkseagreen:[143,188,143],lightgreen:[144,238,144],mediumpurple:[147,112,216],darkviolet:[148,0,211],palegreen:[152,251,152],darkorchid:[153,50,204],yellowgreen:[154,205,50],sienna:[160,82,45],brown:[165,42,42],darkgray:[169,169,169],darkgrey:[169,169,169],lightblue:[173,216,230],greenyellow:[173,255,47],paleturquoise:[175,238,238],lightsteelblue:[176,196,222],powderblue:[176,224,230],firebrick:[178,34,34],darkgoldenrod:[184,134,11],mediumorchid:[186,85,211],rosybrown:[188,143,143],darkkhaki:[189,183,107],silver:[192,192,192],mediumvioletred:[199,21,133],indianred:[205,92,92],peru:[205,133,63],chocolate:[210,105,30],tan:[210,180,140],lightgray:[211,211,211],lightgrey:[211,211,211],palevioletred:[216,112,147],thistle:[216,191,216],orchid:[218,112,214],goldenrod:[218,165,32],crimson:[220,20,60],gainsboro:[220,220,220],plum:[221,160,221],burlywood:[222,184,135],lightcyan:[224,255,255],lavender:[230,230,250],darksalmon:[233,150,122],violet:[238,130,238],palegoldenrod:[238,232,170],lightcoral:[240,128,128],khaki:[240,230,140],aliceblue:[240,248,255],honeydew:[240,255,240],azure:[240,255,255],sandybrown:[244,164,96],wheat:[245,222,179],beige:[245,245,220],whitesmoke:[245,245,245],mintcream:[245,255,250],ghostwhite:[248,248,255],salmon:[250,128,114],antiquewhite:[250,235,215],linen:[250,240,230],lightgoldenrodyellow:[250,250,210],oldlace:[253,245,230],red:[255,0,0],fuchsia:[255,0,255],magenta:[255,0,255],deeppink:[255,20,147],orangered:[255,69,0],tomato:[255,99,71],hotpink:[255,105,180],coral:[255,127,80],darkorange:[255,140,0],lightsalmon:[255,160,122],orange:[255,165,0],lightpink:[255,182,193],pink:[255,192,203],gold:[255,215,0],peachpuff:[255,218,185],navajowhite:[255,222,173],moccasin:[255,228,181],bisque:[255,228,196],mistyrose:[255,228,225],blanchedalmond:[255,235,205],papayawhip:[255,239,213],lavenderblush:[255,240,245],seashell:[255,245,238],cornsilk:[255,248,220],lemonchiffon:[255,250,205],floralwhite:[255,250,240],snow:[255,250,250],yellow:[255,255,0],lightyellow:[255,255,224],ivory:[255,255,240],white:[255,255,255]};class j extends N{constructor(){super(),this._uniforms={};try{this._gl=this._initWebGL()}catch(t){alert(t.message)}}static isSupported(){return!!document.createElement("canvas").getContext("webgl2",{preserveDrawingBuffer:!0})}schedule(t){requestAnimationFrame(t)}getContainer(){return this._gl.canvas}setOptions(t){super.setOptions(t),this._updateSize();let e=this._options.tileSet;e&&"complete"in e&&!e.complete?e.addEventListener("load",()=>this._updateTexture(e)):this._updateTexture(e)}draw(t,e){const i=this._gl,s=this._options;let[n,o,l,h,a]=t,c=i.canvas.height-(o+1)*s.tileHeight;if(i.scissor(n*s.tileWidth,c,s.tileWidth,s.tileHeight),e&&(s.tileColorize?i.clearColor(0,0,0,0):i.clearColor(...k(a)),i.clear(i.COLOR_BUFFER_BIT)),!l)return;let u=[].concat(l),g=[].concat(a),f=[].concat(h);i.uniform2fv(this._uniforms.targetPosRel,[n,o]);for(let d=0;d<u.length;d++){let _=this._options.tileMap[u[d]];if(!_)throw new Error(`Char "${u[d]}" not found in tileMap`);i.uniform1f(this._uniforms.colorize,s.tileColorize?1:0),i.uniform2fv(this._uniforms.tilesetPosAbs,_),s.tileColorize&&(i.uniform4fv(this._uniforms.tint,k(f[d])),i.uniform4fv(this._uniforms.bg,k(g[d]))),i.drawArrays(i.TRIANGLE_STRIP,0,4)}}clear(){const t=this._gl;t.clearColor(...k(this._options.bg)),t.scissor(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT)}computeSize(t,e){let i=Math.floor(t/this._options.tileWidth),s=Math.floor(e/this._options.tileHeight);return[i,s]}computeFontSize(){throw new Error("Tile backend does not understand font size")}eventToPosition(t,e){let i=this._gl.canvas,s=i.getBoundingClientRect();return t-=s.left,e-=s.top,t*=i.width/s.width,e*=i.height/s.height,t<0||e<0||t>=i.width||e>=i.height?[-1,-1]:this._normalizedEventToPosition(t,e)}_initWebGL(){let t=document.createElement("canvas").getContext("webgl2",{preserveDrawingBuffer:!0});window.gl=t;let e=ft(t,at,ct);return t.useProgram(e),ut(t),lt.forEach(i=>this._uniforms[i]=t.getUniformLocation(e,i)),this._program=e,t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),t.enable(t.SCISSOR_TEST),t}_normalizedEventToPosition(t,e){return[Math.floor(t/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]}_updateSize(){const t=this._gl,e=this._options,i=[e.width*e.tileWidth,e.height*e.tileHeight];t.canvas.width=i[0],t.canvas.height=i[1],t.viewport(0,0,i[0],i[1]),t.uniform2fv(this._uniforms.tileSize,[e.tileWidth,e.tileHeight]),t.uniform2fv(this._uniforms.targetSize,i)}_updateTexture(t){dt(this._gl,t)}}const lt=["targetPosRel","tilesetPosAbs","tileSize","targetSize","colorize","bg","tint"],at=`
#version 300 es

in vec2 tilePosRel;
out vec2 tilesetPosPx;

uniform vec2 tilesetPosAbs;
uniform vec2 tileSize;
uniform vec2 targetSize;
uniform vec2 targetPosRel;

void main() {
	vec2 targetPosPx = (targetPosRel + tilePosRel) * tileSize;
	vec2 targetPosNdc = ((targetPosPx / targetSize)-0.5)*2.0;
	targetPosNdc.y *= -1.0;

	gl_Position = vec4(targetPosNdc, 0.0, 1.0);
	tilesetPosPx = tilesetPosAbs + tilePosRel * tileSize;
}`.trim(),ct=`
#version 300 es
precision highp float;

in vec2 tilesetPosPx;
out vec4 fragColor;
uniform sampler2D image;
uniform bool colorize;
uniform vec4 bg;
uniform vec4 tint;

void main() {
	fragColor = vec4(0, 0, 0, 1);

	vec4 texel = texelFetch(image, ivec2(tilesetPosPx), 0);

	if (colorize) {
		texel.rgb = tint.a * tint.rgb + (1.0-tint.a) * texel.rgb;
		fragColor.rgb = texel.a*texel.rgb + (1.0-texel.a)*bg.rgb;
		fragColor.a = texel.a + (1.0-texel.a)*bg.a;
	} else {
		fragColor = texel;
	}
}`.trim();function ft(r,t,e){const i=r.createShader(r.VERTEX_SHADER);if(r.shaderSource(i,t),r.compileShader(i),!r.getShaderParameter(i,r.COMPILE_STATUS))throw new Error(r.getShaderInfoLog(i)||"");const s=r.createShader(r.FRAGMENT_SHADER);if(r.shaderSource(s,e),r.compileShader(s),!r.getShaderParameter(s,r.COMPILE_STATUS))throw new Error(r.getShaderInfoLog(s)||"");const n=r.createProgram();if(r.attachShader(n,i),r.attachShader(n,s),r.linkProgram(n),!r.getProgramParameter(n,r.LINK_STATUS))throw new Error(r.getProgramInfoLog(n)||"");return n}function ut(r){const t=new Float32Array([0,0,1,0,0,1,1,1]),e=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,e),r.bufferData(r.ARRAY_BUFFER,t,r.STATIC_DRAW),r.enableVertexAttribArray(0),r.vertexAttribPointer(0,2,r.FLOAT,!1,0,0)}function dt(r,t){let e=r.createTexture();return r.bindTexture(r.TEXTURE_2D,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.REPEAT),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.REPEAT),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),e}let X={};function k(r){if(!(r in X)){let t;if(r=="transparent")t=[0,0,0,0];else if(r.indexOf("rgba")>-1){t=(r.match(/[\d.]+/g)||[]).map(Number);for(let e=0;e<3;e++)t[e]=t[e]/255}else t=W(r).map(e=>e/255),t.push(1);X[r]=t}return X[r]}function gt(r){return`\x1B[0;48;5;${F(r)}m\x1B[2J`}function _t(r,t){return`\x1B[0;38;5;${F(r)};48;5;${F(t)}m`}function pt(r,t){return`\x1B[${t+1};${r+1}H`}function F(r){const i=.0234375;let s=W(r),n=Math.floor(s[0]*i),o=Math.floor(s[1]*i),l=Math.floor(s[2]*i);return n*36+o*6+l*1+16}class V extends N{constructor(){super(),this._offset=[0,0],this._cursor=[-1,-1],this._lastColor=""}schedule(t){setTimeout(t,1e3/60)}setOptions(t){super.setOptions(t);let e=[t.width,t.height],i=this.computeSize();this._offset=i.map((s,n)=>Math.floor((s-e[n])/2))}clear(){process.stdout.write(gt(this._options.bg))}draw(t,e){let[i,s,n,o,l]=t,h=this._offset[0]+i,a=this._offset[1]+s,c=this.computeSize();if(h<0||h>=c[0]||a<0||a>=c[1]||((h!==this._cursor[0]||a!==this._cursor[1])&&(process.stdout.write(pt(h,a)),this._cursor[0]=h,this._cursor[1]=a),e&&(n||(n=" ")),!n))return;let u=_t(o,l);if(u!==this._lastColor&&(process.stdout.write(u),this._lastColor=u),n!="	"){let g=[].concat(n);process.stdout.write(g[0])}this._cursor[0]++,this._cursor[0]>=c[0]&&(this._cursor[0]=0,this._cursor[1]++)}computeFontSize(){throw new Error("Terminal backend has no notion of font size")}eventToPosition(t,e){return[t,e]}computeSize(){return[process.stdout.columns,process.stdout.rows]}}const mt=/%([bc]){([^}]*)}/g,P=0,C=1,K=2,Z=3;function wt(r,t){let e=[],i=0;r.replace(mt,function(n,o,l,h){let a=r.substring(i,h);return a.length&&e.push({type:P,value:a}),e.push({type:o=="c"?K:Z,value:l.trim()}),i=h+n.length,""});let s=r.substring(i);return s.length&&e.push({type:P,value:s}),bt(e,t)}function bt(r,t){t||(t=1/0);let e=0,i=0,s=-1;for(;e<r.length;){let o=r[e];if(o.type==C&&(i=0,s=-1),o.type!=P){e++;continue}for(;i==0&&o.value.charAt(0)==" ";)o.value=o.value.substring(1);let l=o.value.indexOf(`
`);if(l!=-1){o.value=z(r,e,l,!0);let h=o.value.split("");for(;h.length&&h[h.length-1]==" ";)h.pop();o.value=h.join("")}if(!o.value.length){r.splice(e,1);continue}if(i+o.value.length>t){let h=-1;for(;;){let a=o.value.indexOf(" ",h+1);if(a==-1||i+a>t)break;h=a}if(h!=-1)o.value=z(r,e,h,!0);else if(s!=-1){let a=r[s],c=a.value.lastIndexOf(" ");a.value=z(r,s,c,!0),e=s}else o.value=z(r,e,t-i,!1)}else i+=o.value.length,o.value.indexOf(" ")!=-1&&(s=e);e++}r.push({type:C});let n=null;for(let o=0;o<r.length;o++){let l=r[o];switch(l.type){case P:n=l;break;case C:if(n){let h=n.value.split("");for(;h.length&&h[h.length-1]==" ";)h.pop();n.value=h.join("")}n=null;break}}return r.pop(),r}function z(r,t,e,i){let s={type:C},n={type:P,value:r[t].value.substring(e+(i?1:0))};return r.splice(t+1,0,s,n),r[t].value.substring(0,e)}let xt=80,yt=25;const S={4:[[0,-1],[1,0],[0,1],[-1,0]],8:[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]],6:[[-1,-1],[1,-1],[2,0],[1,1],[-1,1],[-2,0]]},vt={hex:G,rect:q,tile:D,"tile-gl":j,term:V},Mt={width:xt,height:yt,transpose:!1,layout:"rect",fontSize:15,spacing:1,border:0,forceSquareRatio:!1,fontFamily:"monospace",fontStyle:"",fg:"#ccc",bg:"#000",tileWidth:32,tileHeight:32,tileMap:{},tileSet:null,tileColorize:!1};let Tt=(()=>{class r{constructor(e={}){this._data={},this._dirty=!1,this._options={},e=Object.assign({},Mt,e),this.setOptions(e),this.DEBUG=this.DEBUG.bind(this),this._tick=this._tick.bind(this),this._backend.schedule(this._tick)}DEBUG(e,i,s){let n=[this._options.bg,this._options.fg];this.draw(e,i,null,null,n[s%n.length])}clear(){this._data={},this._dirty=!0}setOptions(e){if(Object.assign(this._options,e),e.width||e.height||e.fontSize||e.fontFamily||e.spacing||e.layout){if(e.layout){let i=vt[e.layout];this._backend=new i}this._backend.setOptions(this._options),this._dirty=!0}return this}getOptions(){return this._options}getContainer(){return this._backend.getContainer()}computeSize(e,i){return this._backend.computeSize(e,i)}computeFontSize(e,i){return this._backend.computeFontSize(e,i)}computeTileSize(e,i){let s=Math.floor(e/this._options.width),n=Math.floor(i/this._options.height);return[s,n]}eventToPosition(e){let i,s;return"touches"in e?(i=e.touches[0].clientX,s=e.touches[0].clientY):(i=e.clientX,s=e.clientY),this._backend.eventToPosition(i,s)}draw(e,i,s,n,o){n||(n=this._options.fg),o||(o=this._options.bg);let l=`${e},${i}`;this._data[l]=[e,i,s,n,o],this._dirty!==!0&&(this._dirty||(this._dirty={}),this._dirty[l]=!0)}drawOver(e,i,s,n,o){const l=`${e},${i}`,h=this._data[l];h?(h[2]=s||h[2],h[3]=n||h[3],h[4]=o||h[4]):this.draw(e,i,s,n,o)}drawText(e,i,s,n){let o=null,l=null,h=e,a=i,c=1;n||(n=this._options.width-e);let u=wt(s,n);for(;u.length;){let g=u.shift();switch(g.type){case P:let f=!1,d=!1,_=!1,m=!1;for(let y=0;y<g.value.length;y++){let x=g.value.charCodeAt(y),T=g.value.charAt(y);if(this._options.layout==="term"){let v=x>>8;if(v===17||v>=46&&v<=159||v>=172&&v<=215||x>=43360&&x<=43391){this.draw(h+0,a,T,o,l),this.draw(h+1,a,"	",o,l),h+=2;continue}}_=x>65280&&x<65377||x>65500&&x<65512||x>65518,f=T.charCodeAt(0)==32||T.charCodeAt(0)==12288,m&&!_&&!f&&h++,_&&!d&&h++,this.draw(h++,a,T,o,l),d=f,m=_}break;case K:o=g.value||null;break;case Z:l=g.value||null;break;case C:h=e,a++,c++;break}}return c}_tick(){if(this._backend.schedule(this._tick),!!this._dirty){if(this._dirty===!0){this._backend.clear();for(let e in this._data)this._draw(e,!1)}else for(let e in this._dirty)this._draw(e,!0);this._dirty=!1}}_draw(e,i){let s=this._data[e];s[4]!=this._options.bg&&(i=!0),this._backend.draw(s,i)}}return r.Rect=q,r.Hex=G,r.Tile=D,r.TileGL=j,r.Term=V,r})();class B{constructor(t,e={}){this._lightPasses=t,this._options=Object.assign({topology:8},e)}_getCircle(t,e,i){let s=[],n,o,l;switch(this._options.topology){case 4:o=1,l=[0,1],n=[S[8][7],S[8][1],S[8][3],S[8][5]];break;case 6:n=S[6],o=1,l=[-1,1];break;case 8:n=S[4],o=2,l=[-1,1];break;default:throw new Error("Incorrect topology for FOV computation")}let h=t+l[0]*i,a=e+l[1]*i;for(let c=0;c<n.length;c++)for(let u=0;u<i*o;u++)s.push([h,a]),h+=n[c][0],a+=n[c][1];return s}}class St extends B{compute(t,e,i,s){if(s(t,e,0,1),!this._lightPasses(t,e))return;let n=[],o,l,h,a,c;for(let u=1;u<=i;u++){let g=this._getCircle(t,e,u),f=360/g.length;for(let d=0;d<g.length;d++)if(h=g[d][0],a=g[d][1],o=f*(d-.5),l=o+f,c=!this._lightPasses(h,a),this._visibleCoords(Math.floor(o),Math.ceil(l),c,n)&&s(h,a,u,1),n.length==2&&n[0]==0&&n[1]==360)return}}_visibleCoords(t,e,i,s){if(t<0){let l=this._visibleCoords(0,e,i,s),h=this._visibleCoords(360+t,360,i,s);return l||h}let n=0;for(;n<s.length&&s[n]<t;)n++;if(n==s.length)return i&&s.push(t,e),!0;let o=0;if(n%2){for(;n<s.length&&s[n]<e;)n++,o++;return o==0?!1:(i&&(o%2?s.splice(n-o,o,e):s.splice(n-o,o)),!0)}else{for(;n<s.length&&s[n]<e;)n++,o++;return t==s[n-o]&&o==1?!1:(i&&(o%2?s.splice(n-o,o,t):s.splice(n-o,o,t,e)),!0)}}}class Et extends B{compute(t,e,i,s){if(s(t,e,0,1),!this._lightPasses(t,e))return;let n=[],o,l,h,a,c,u;for(let g=1;g<=i;g++){let f=this._getCircle(t,e,g),d=f.length;for(let _=0;_<d;_++)if(o=f[_][0],l=f[_][1],a=[_?2*_-1:2*d-1,2*d],c=[2*_+1,2*d],h=!this._lightPasses(o,l),u=this._checkVisibility(a,c,h,n),u&&s(o,l,g,u),n.length==2&&n[0][0]==0&&n[1][0]==n[1][1])return}}_checkVisibility(t,e,i,s){if(t[0]>e[0]){let f=this._checkVisibility(t,[t[1],t[1]],i,s),d=this._checkVisibility([0,1],e,i,s);return(f+d)/2}let n=0,o=!1;for(;n<s.length;){let f=s[n],d=f[0]*t[1]-t[0]*f[1];if(d>=0){d==0&&!(n%2)&&(o=!0);break}n++}let l=s.length,h=!1;for(;l--;){let f=s[l],d=e[0]*f[1]-f[0]*e[1];if(d>=0){d==0&&l%2&&(h=!0);break}}let a=!0;if((n==l&&(o||h)||o&&h&&n+1==l&&l%2||n>l&&n%2)&&(a=!1),!a)return 0;let c,u=l-n+1;if(u%2)if(n%2){let f=s[n];c=(e[0]*f[1]-f[0]*e[1])/(f[1]*e[1]),i&&s.splice(n,u,e)}else{let f=s[l];c=(f[0]*t[1]-t[0]*f[1])/(t[1]*f[1]),i&&s.splice(n,u,t)}else if(n%2){let f=s[n],d=s[l];c=(d[0]*f[1]-f[0]*d[1])/(f[1]*d[1]),i&&s.splice(n,u)}else return i&&s.splice(n,u,t,e),1;let g=(e[0]*t[1]-t[0]*e[1])/(t[1]*e[1]);return c/g}}const M=[[-1,0,0,1],[0,-1,1,0],[0,-1,-1,0],[-1,0,0,-1],[1,0,0,-1],[0,1,-1,0],[0,1,1,0],[1,0,0,1]];class Pt extends B{compute(t,e,i,s){s(t,e,0,1);for(let n=0;n<M.length;n++)this._renderOctant(t,e,M[n],i,s)}compute180(t,e,i,s,n){n(t,e,0,1);let o=(s-1+8)%8,l=(s-2+8)%8,h=(s+1+8)%8;this._renderOctant(t,e,M[l],i,n),this._renderOctant(t,e,M[o],i,n),this._renderOctant(t,e,M[s],i,n),this._renderOctant(t,e,M[h],i,n)}compute90(t,e,i,s,n){n(t,e,0,1);let o=(s-1+8)%8;this._renderOctant(t,e,M[s],i,n),this._renderOctant(t,e,M[o],i,n)}_renderOctant(t,e,i,s,n){this._castVisibility(t,e,1,1,0,s+1,i[0],i[1],i[2],i[3],n)}_castVisibility(t,e,i,s,n,o,l,h,a,c,u){if(!(s<n))for(let g=i;g<=o;g++){let f=-g-1,d=-g,_=!1,m=0;for(;f<=0;){f+=1;let y=t+f*l+d*h,x=e+f*a+d*c,T=(f-.5)/(d+.5),v=(f+.5)/(d-.5);if(!(v>s)){if(T<n)break;if(f*f+d*d<o*o&&u(y,x,g,1),!_)!this._lightPasses(y,x)&&g<o&&(_=!0,this._castVisibility(t,e,g+1,s,T,o,l,h,a,c,u),m=v);else{if(!this._lightPasses(y,x)){m=v;continue}_=!1,s=m}}}if(_)break}}}const Ct={DiscreteShadowcasting:St,PreciseShadowcasting:Et,RecursiveShadowcasting:Pt};class J{constructor(t,e,i,s={}){this._toX=t,this._toY=e,this._passableCallback=i,this._options=Object.assign({topology:8},s),this._dirs=S[this._options.topology],this._options.topology==8&&(this._dirs=[this._dirs[0],this._dirs[2],this._dirs[4],this._dirs[6],this._dirs[1],this._dirs[3],this._dirs[5],this._dirs[7]])}_getNeighbors(t,e){let i=[];for(let s=0;s<this._dirs.length;s++){let n=this._dirs[s],o=t+n[0],l=e+n[1];this._passableCallback(o,l)&&i.push([o,l])}return i}}class Rt extends J{constructor(t,e,i,s){super(t,e,i,s),this._computed={},this._todo=[],this._add(t,e,null)}compute(t,e,i){let s=t+","+e;if(s in this._computed||this._compute(t,e),!(s in this._computed))return;let n=this._computed[s];for(;n;)i(n.x,n.y),n=n.prev}_compute(t,e){for(;this._todo.length;){let i=this._todo.shift();if(i.x==t&&i.y==e)return;let s=this._getNeighbors(i.x,i.y);for(let n=0;n<s.length;n++){let o=s[n],l=o[0],h=o[1];l+","+h in this._computed||this._add(l,h,i)}}}_add(t,e,i){let s={x:t,y:e,prev:i};this._computed[t+","+e]=s,this._todo.push(s)}}class Ot extends J{constructor(t,e,i,s={}){super(t,e,i,s),this._todo=[],this._done={}}compute(t,e,i){for(this._todo=[],this._done={},this._fromX=t,this._fromY=e,this._add(this._toX,this._toY,null);this._todo.length;){let n=this._todo.shift(),o=n.x+","+n.y;if(o in this._done)continue;if(this._done[o]=n,n.x==t&&n.y==e)break;let l=this._getNeighbors(n.x,n.y);for(let h=0;h<l.length;h++){let a=l[h],c=a[0],u=a[1];c+","+u in this._done||this._add(c,u,n)}}let s=this._done[t+","+e];if(s)for(;s;)i(s.x,s.y),s=s.prev}_add(t,e,i){let s=this._distance(t,e),n={x:t,y:e,prev:i,g:i?i.g+1:0,h:s},o=n.g+n.h;for(let l=0;l<this._todo.length;l++){let h=this._todo[l],a=h.g+h.h;if(o<a||o==a&&s<h.h){this._todo.splice(l,0,n);return}}this._todo.push(n)}_distance(t,e){switch(this._options.topology){case 4:return Math.abs(t-this._fromX)+Math.abs(e-this._fromY);case 6:let i=Math.abs(t-this._fromX),s=Math.abs(e-this._fromY);return s+Math.max(0,(i-s)/2);case 8:return Math.max(Math.abs(t-this._fromX),Math.abs(e-this._fromY))}}}const kt={Dijkstra:Rt,AStar:Ot};class H{constructor(t,e){this.dx=t,this.dy=e}perform(t){}}class Q extends H{perform(t){const e=t.x+this.dx,i=t.y+this.dy;window.engine.gameMap.isInBounds(e,i)&&window.engine.gameMap.tiles[i][e].walkable&&(window.engine.gameMap.getBlockingEntityAtLocation(e,i)||t.move(this.dx,this.dy))}}class p extends H{perform(t){const e=t.x+this.dx,i=t.y+this.dy;return window.engine.gameMap.getActorAtLocation(e,i)?new tt(this.dx,this.dy).perform(t):new Q(this.dx,this.dy).perform(t)}}class tt extends H{perform(t){const e=t.x+this.dx,i=t.y+this.dy,s=window.engine.gameMap.getActorAtLocation(e,i);if(!s)return;const n=t.fighter.power-s.fighter.defense,o=`${t.name.toUpperCase()} attacks ${s.name}`;n>0?(console.log(`${o} for ${n} hit points.`),s.fighter.hp-=n):console.log(`${o} but does no damage.`)}}class U{perform(t){}}const zt={ArrowUp:new p(0,-1),ArrowDown:new p(0,1),ArrowLeft:new p(-1,0),ArrowRight:new p(1,0),Home:new p(-1,-1),End:new p(-1,1),PageUp:new p(1,-1),PageDown:new p(1,1),1:new p(-1,1),2:new p(0,1),3:new p(1,1),4:new p(-1,0),6:new p(1,0),7:new p(-1,-1),8:new p(0,-1),9:new p(1,-1),h:new p(-1,0),j:new p(0,1),k:new p(0,-1),l:new p(1,0),y:new p(-1,-1),u:new p(1,-1),b:new p(-1,1),n:new p(1,1),5:new U,Period:new U};function It(r){return zt[r.key]}class Lt{constructor(){b(this,"path");this.path=[]}perform(t){}calculatePathTo(t,e,i){const s=(o,l)=>window.engine.gameMap.tiles[l][o].walkable,n=new kt.Dijkstra(t,e,s,{});this.path=[],n.compute(i.x,i.y,(o,l)=>{this.path.push([o,l])}),this.path.shift()}}class et extends Lt{constructor(){super()}perform(t){const e=window.engine.player,i=e.x-t.x,s=e.y-t.y,n=Math.max(Math.abs(i),Math.abs(s));if(window.engine.gameMap.tiles[t.y][t.x].visible){if(n<=1)return new tt(i,s).perform(t);this.calculatePathTo(e.x,e.y,t)}if(this.path.length>0){const[o,l]=this.path[0];return this.path.shift(),new Q(o-t.x,l-t.y).perform(t)}return new U().perform(t)}}class ${constructor(t,e,i){b(this,"entity");b(this,"_hp");this.maxHp=t,this.defense=e,this.power=i,this._hp=t,this.entity=null}get hp(){return this._hp}set hp(t){var e;this._hp=Math.max(0,Math.min(t,this.maxHp)),this._hp===0&&((e=this.entity)!=null&&e.isAlive)&&this.die()}die(){if(!this.entity)return;let t="";window.engine.player===this.entity?t="You died!":t=`${this.entity.name} is dead!`,this.entity.char="%",this.entity.fg="#bf0000",this.entity.blocksMovement=!1,this.entity.ai=null,this.entity.name=`Remains of ${this.entity.name}`,this.entity.renderOrder=it.Corpse,console.log(t)}}var it=(r=>(r[r.Corpse=0]="Corpse",r[r.Item=1]="Item",r[r.Actor=2]="Actor",r))(it||{});class Xt{constructor(t,e,i,s="#fff",n="#000",o="<Unnamed>",l=!1,h=0){this.x=t,this.y=e,this.char=i,this.fg=s,this.bg=n,this.name=o,this.blocksMovement=l,this.renderOrder=h,this.x=t,this.y=e,this.char=i,this.fg=s,this.bg=n}move(t,e){this.x+=t,this.y+=e}}class I extends Xt{constructor(t,e,i,s="#fff",n="#000",o="<Unnamed>",l,h){super(t,e,i,s,n,o,!0,2),this.x=t,this.y=e,this.char=i,this.fg=s,this.bg=n,this.name=o,this.ai=l,this.fighter=h,this.fighter.entity=this}get isAlive(){return!!this.ai||window.engine.player===this}}function Ft(r,t){return new I(r,t,"@","#fff","#000","Player",null,new $(30,2,5))}function Ut(r,t){return new I(r,t,"o","#3f7f3f","#000","Orc",new et,new $(10,0,3))}function At(r,t){return new I(r,t,"T","#007f00","#000","Troll",new et,new $(16,1,4))}const st={walkable:!0,transparent:!0,visible:!1,seen:!1,dark:{char:" ",fg:"#fff",bg:"#323296"},light:{char:" ",fg:"#fff",bg:"#c8b432"}},nt={walkable:!1,transparent:!1,visible:!1,seen:!1,dark:{char:" ",fg:"#fff",bg:"#000064"},light:{char:" ",fg:"#fff",bg:"#826e32"}};class Nt{constructor(t,e,i,s){b(this,"tiles");this.width=t,this.height=e,this.display=i,this.entities=s,this.width=t,this.height=e,this.display=i,this.tiles=new Array(this.height);for(let n=0;n<this.height;n++){const o=new Array(this.width);for(let l=0;l<this.width;l++)o[l]={...nt};this.tiles[n]=o}}get actors(){return this.entities.filter(t=>t instanceof I).map(t=>t).filter(t=>t.isAlive)}isInBounds(t,e){return 0<=t&&t<this.width&&0<=e&&e<this.height}render(){for(let t=0;t<this.tiles.length;t++){const e=this.tiles[t];for(let i=0;i<e.length;i++){const s=e[i];let n=" ",o="#fff",l="#000";s.visible?(n=s.light.char,o=s.light.fg,l=s.light.bg):s.seen&&(n=s.dark.char,o=s.dark.fg,l=s.dark.bg),this.display.draw(i,t,n,o,l),this.entities.slice().sort((a,c)=>a.renderOrder-c.renderOrder).forEach(a=>{this.tiles[a.y][a.x].visible&&this.display.draw(a.x,a.y,a.char,a.fg,a.bg)})}}}getActorAtLocation(t,e){return this.actors.find(i=>i.x===t&&i.y===e)}get nonPlayerEntities(){return this.entities.filter(t=>t.name!=="Player")}getBlockingEntityAtLocation(t,e){return this.entities.find(i=>i.blocksMovement&&i.x===t&&i.y===e)}addRoom(t,e,i){for(let s=e;s<e+i.length;s++){const n=this.tiles[s],o=i[s-e];for(let l=t;l<t+o.length;l++)n[l]=o[l-t]}}lightPasses(t,e){return this.isInBounds(t,e)?this.tiles[e][t].transparent:!1}updateFov(t){for(let i=0;i<this.height;i++)for(let s=0;s<this.width;s++)this.tiles[i][s].visible=!1;new Ct.PreciseShadowcasting(this.lightPasses.bind(this)).compute(t.x,t.y,8,(i,s,n,o)=>{o===1&&(this.tiles[s][i].visible=!0,this.tiles[s][i].seen=!0)})}}class Yt{constructor(t,e,i,s){b(this,"tiles");this.x=t,this.y=e,this.width=i,this.height=s,this.tiles=new Array(this.height),this.buildRoom()}buildRoom(){for(let t=0;t<this.height;t++){const e=new Array(this.width);for(let i=0;i<this.width;i++){const s=i===0||i===this.width-1||t===0||t===this.height-1;e[i]=s?{...nt}:{...st}}this.tiles[t]=e}}get bounds(){return{x1:this.x,y1:this.y,x2:this.x+this.width-1,y2:this.y+this.height-1}}get center(){const t=this.x+Math.floor(this.width/2),e=this.y+Math.floor(this.height/2);return[t,e]}intersects(t){return this.x<=t.x+t.width&&this.x+this.width>=t.x&&this.y<=t.y+t.height&&this.y+this.width>=t.y}}function Bt(r,t,e){const i=E(0,e);for(let s=0;s<i;s++){const n=r.bounds,o=E(n.x1+1,n.x2-1),l=E(n.y1+1,n.y2-1);t.entities.some(h=>h.x==o&&h.y==l)||(Math.random()<.8?t.entities.push(Ut(o,l)):t.entities.push(At(o,l)))}}function Ht(r,t,e,i,s,n,o,l){const h=new Nt(r,t,l,[o]),a=[];for(let u=0;u<e;u++){const g=E(i,s),f=E(i,s),d=E(0,r-g-1),_=E(0,t-f-1),m=new Yt(d,_,g,f);a.some(y=>y.intersects(m))||(h.addRoom(d,_,m.tiles),Bt(m,h,n),a.push(m))}const c=a[0].center;o.x=c[0],o.y=c[1];for(let u=0;u<a.length-1;u++){const g=a[u],f=a[u+1];for(let d of $t(g,f))h.tiles[d[1]][d[0]]={...st}}return h}function*$t(r,t){let e=r.center;const i=t.center;let n=Math.random()<.5?0:1;for(;e[0]!==i[0]||e[1]!==i[1];){const o=Math.sign(i[n]-e[n]);o!==0?(e[n]+=o,yield e):(n=n===0?1:0,yield e)}}function E(r,t){return Math.floor(Math.random()*(t-r+1)+r)}const w=class w{constructor(t){b(this,"display");b(this,"gameMap");this.player=t,this.display=new Tt({width:w.WIDTH,height:w.HEIGHT,forceSquareRatio:!0}),this.gameMap=Ht(w.MAP_WIDTH,w.MAP_HEIGHT,w.MAX_ROOMS,w.MIN_ROOM_SIZE,w.MAX_ROOM_SIZE,w.MAX_MONSTERS_PER_ROOM,t,this.display);const e=this.display.getContainer();document.body.appendChild(e),window.addEventListener("keydown",i=>{this.update(i)}),this.gameMap.updateFov(this.player),this.render()}handleEnemyTurns(){this.gameMap.actors.forEach(t=>{var e;t.isAlive&&((e=t.ai)==null||e.perform(t))})}update(t){if(this.display.clear(),this.player.fighter.hp>0){const e=It(t);e&&e.perform(this.player),this.handleEnemyTurns()}this.gameMap.updateFov(this.player),this.render()}render(){this.display.drawText(1,47,`HP: %c{red}%b{white}${this.player.fighter.hp}/%c{green}%b{white}${this.player.fighter.maxHp}`),this.gameMap.render()}};b(w,"WIDTH",80),b(w,"HEIGHT",50),b(w,"MAP_WIDTH",80),b(w,"MAP_HEIGHT",45),b(w,"MIN_ROOM_SIZE",6),b(w,"MAX_ROOM_SIZE",10),b(w,"MAX_ROOMS",30),b(w,"MAX_MONSTERS_PER_ROOM",2);let R=w;window.addEventListener("DOMContentLoaded",()=>{window.engine=new R(Ft(R.WIDTH/2,R.HEIGHT/2))});
